# Milestone v1.0: Stack Modernization & UI Features

**Status:** SHIPPED 2026-02-03
**Phases:** 1-3
**Total Plans:** 9

## Overview

BeerBot v1.0 modernizes the stack and adds themed UI features. Starting with dependency updates to establish a stable foundation, adding a beer-branded theming system with light/dark mode, and finishing with quarterly ranking navigation that lets users explore leaderboards by quarter.

## Phases

### Phase 1: Dependency Modernization

**Goal**: All dependencies updated to latest stable versions with verified functionality
**Depends on**: Nothing (first phase)
**Requirements**: DEP-01, DEP-02, DEP-03, DEP-04
**Plans**: 3 plans

Plans:

- [x] 01-01-PLAN.md - Upgrade Go backend toolchain to 1.25.6
- [x] 01-02-PLAN.md - Upgrade Next.js to 15.5.11
- [x] 01-03-PLAN.md - Update Docker base images (Alpine 3.23, Bun 1.3.7)

**Details:**

Success Criteria (all verified):
1. Next.js 15.5.11 installed and all existing features work correctly
2. Go backend updated to 1.25.6 and compiles without errors
3. Bun runtime updated to 1.3.7 and dev server starts successfully
4. Docker images use Alpine 3.23 and containers build without errors
5. All existing leaderboard functionality verified working (date ranges, user data)

Completed: 2026-02-01

### Phase 2: Beer-Branded Theming

**Goal**: Users can toggle between light and dark themes with beer-branded colors
**Depends on**: Phase 1
**Requirements**: THEME-01, THEME-02, THEME-03, THEME-04, THEME-05, THEME-06, THEME-07
**Plans**: 3 plans

Plans:

- [x] 02-01-PLAN.md - Beer-themed color palette and CSS transitions
- [x] 02-02-PLAN.md - Cookie-based persistence and SSR theme rendering
- [x] 02-03-PLAN.md - Toggle enhancement with tooltip and verification

**Details:**

Success Criteria (all verified):
1. User can see theme toggle control in UI and click to switch themes
2. Theme switches immediately between light and dark modes without page reload
3. User's theme preference persists when closing and reopening browser
4. First visit defaults to light mode (user decision: no system preference detection)
5. No flash of wrong theme colors appears when page loads
6. Light mode uses golden/amber beer colors and dark mode uses stout/porter colors
7. All buttons have consistent styling in both light and dark themes

Completed: 2026-02-02

### Phase 3: Quarterly Rankings

**Goal**: Users can navigate and view leaderboards for any quarter of any year
**Depends on**: Phase 2
**Requirements**: QRANK-01, QRANK-02, QRANK-03, QRANK-04, QRANK-05, QRANK-06, QRANK-07
**Plans**: 3 plans

Plans:

- [x] 03-01-PLAN.md - Route foundation (utilities + URL structure)
- [x] 03-02-PLAN.md - Navigation components (tabs, year selector, shortcuts)
- [x] 03-03-PLAN.md - Leaderboard display with rank indicators + entry points

**Details:**

Success Criteria (all verified):
1. User can navigate to quarterly pages (Q1, Q2, Q3, Q4) from main UI
2. Quarterly leaderboard shows top givers with beer counts for that quarter
3. Quarterly leaderboard shows top recipients with beer counts for that quarter
4. User can select different years to view historical quarters
5. URL changes when selecting quarter (e.g., /rankings/2026/q1) and is shareable
6. User can click "Current Quarter" shortcut to jump to current quarter
7. User can click "Last Quarter" shortcut to jump to previous quarter

Completed: 2026-02-02

---

## Milestone Summary

**Decimal Phases:** None

**Key Decisions:**

- Accepted toolchain line removal as correct Go 1.25 behavior
- Pinned Next.js and eslint-config-next to exact 15.5.11 (no caret) for deterministic builds
- Accepted @next/swc 15.5.7 mismatch warning as known upstream issue
- Alpine minor version tags for automatic patch pulls; exact Bun pins for reproducibility
- HSL format without hsl() wrapper in CSS variables (Tailwind convention)
- Transition only color/background-color/border-color for performance
- Golden amber (hsl 38) as primary accent across both modes
- Light mode default on first visit (no system preference check)
- Dual cookie setting pattern (Server Action + client-side for immediate reads)
- ThemeScript blocking script for defense-in-depth FOUC prevention
- Year range 2020-2099 for quarter validation
- Future quarters return 404 for clean URL semantics
- ARIA tablist/tab pattern for accessible navigation
- Fixed page height with scrollable leaderboard lists
- Rank change: previousRank - currentRank (positive = moved up)

**Issues Resolved:**

- tsconfig path alias misconfiguration (had ./src/* but project uses root)
- Dark mode styling issues in UsersList, UsersPage, DateRangePicker
- Moon icon rotation removed (upside-down appearance)
- All-time view API date range fix (null dates to full range)
- Layout consistency with fixed height and scrollable lists

**Issues Deferred:**

- None

**Technical Debt Incurred:**

- Pre-existing docker-compose.dev.yml frontend-dev Dockerfile path issue
- @next/swc 15.5.7 version mismatch warning (upstream issue)
- N+1 API calls for user stats (consider batch endpoint)
- No error retry UI for individual user fetch failures
- User cache 7-day TTL with no manual invalidation

---

_For current project status, see .planning/PROJECT.md_
